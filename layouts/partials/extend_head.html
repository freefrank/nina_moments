<!-- 自定义社交信息流样式和脚本 -->
{{- if .IsHome }}
<link rel="stylesheet" href="{{ "css/social-feed.css" | relURL }}">
<script src="{{ "js/social-feed.js" | relURL }}" defer></script>
{{- end }}

<!-- 搜索页面本地兼容脚本 - 禁用主题默认搜索 -->
{{- if eq .Layout "search" }}
<script>
// 禁用PaperMod主题的搜索功能
window.addEventListener('DOMContentLoaded', function() {
    console.log('🔍 禁用PaperMod主题搜索功能...');
    // 清空window.onload事件（PaperMod搜索使用这个）
    window.onload = null;
    // 删除可能存在的全局fuse实例
    if (window.fuse) delete window.fuse;
});
</script>
<script src="{{ "js/local-search.js" | relURL }}" defer></script>
{{- end }}

<!-- 图片九宫格样式和脚本 -->
{{- if and (not .IsHome) (ne .Layout "search") }}
<link rel="stylesheet" href="{{ "css/image-grid.css" | relURL }}">
<script src="{{ "js/image-grid.js" | relURL }}" defer></script>
{{- end }}

<!-- 优化移动端显示 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- 添加一些基础的SEO和社交媒体优化 -->
{{- if .IsHome }}
<meta name="description" content="我的朋友圈时光机 - 社交媒体内容归档">
<meta property="og:title" content="我的朋友圈时光机">
<meta property="og:description" content="整理的社交媒体内容归档，按时间展示">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
{{- end }}

<!-- 预加载关键资源 -->
{{- if .IsHome }}
<link rel="preload" href="{{ "css/social-feed.css" | relURL }}" as="style">
<link rel="preload" href="{{ "js/social-feed.js" | relURL }}" as="script">
{{- end }}